"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/update-user";
exports.ids = ["pages/api/update-user"];
exports.modules = {

/***/ "canvas":
/*!*************************!*\
  !*** external "canvas" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("canvas");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "qrcode":
/*!*************************!*\
  !*** external "qrcode" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("qrcode");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupdate-user&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupdate-user.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupdate-user&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupdate-user.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_update_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\update-user.js */ \"(api)/./src/pages/api/update-user.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_update_user_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_update_user_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/update-user\",\n        pathname: \"/api/update-user\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_update_user_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwZGF0ZS11c2VyJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUN1cGRhdGUtdXNlci5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM4RDtBQUM5RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDBEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZ2ljYXJkMDIvPzYyNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcdXBkYXRlLXVzZXIuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91cGRhdGUtdXNlclwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwZGF0ZS11c2VyXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupdate-user&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupdate-user.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./multer-config.js":
/*!**************************!*\
  !*** ./multer-config.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n\nconst storage = multer__WEBPACK_IMPORTED_MODULE_0___default().diskStorage({\n    destination: function(req, file, cb) {\n        cb(null, \"./public/uploads\");\n    },\n    filename: function(req, file, cb) {\n        cb(null, Date.now() + \"-\" + file.originalname);\n    }\n});\nconst upload = multer__WEBPACK_IMPORTED_MODULE_0___default()({\n    storage: storage\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (upload);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tdWx0ZXItY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QjtBQUU1QixNQUFNQyxVQUFVRCx5REFBa0IsQ0FBQztJQUMvQkcsYUFBYSxTQUFVQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRTtRQUNoQ0EsR0FBRyxNQUFNO0lBQ2I7SUFDQUMsVUFBVSxTQUFVSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRTtRQUM3QkEsR0FBRyxNQUFNRSxLQUFLQyxHQUFHLEtBQUssTUFBTUosS0FBS0ssWUFBWTtJQUNqRDtBQUNKO0FBRUEsTUFBTUMsU0FBU1gsNkNBQU1BLENBQUM7SUFBRUMsU0FBU0E7QUFBUTtBQUV6QyxpRUFBZVUsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZ2ljYXJkMDIvLi9tdWx0ZXItY29uZmlnLmpzP2NiOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcclxuICAgICAgICBjYihudWxsLCAnLi9wdWJsaWMvdXBsb2FkcycpO1xyXG4gICAgfSxcclxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xyXG4gICAgICAgIGNiKG51bGwsIERhdGUubm93KCkgKyAnLScgKyBmaWxlLm9yaWdpbmFsbmFtZSk7XHJcbiAgICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7IHN0b3JhZ2U6IHN0b3JhZ2UgfSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1cGxvYWQ7XHJcbiJdLCJuYW1lcyI6WyJtdWx0ZXIiLCJzdG9yYWdlIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsIm9yaWdpbmFsbmFtZSIsInVwbG9hZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./multer-config.js\n");

/***/ }),

/***/ "(api)/./src/lib/db.js":
/*!***********************!*\
  !*** ./src/lib/db.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql2_promise__WEBPACK_IMPORTED_MODULE_0__);\n// import mysql from 'mysql2/promise';\n// const connection = mysql.createPool({\n//     host: process.env.DB_HOST,\n//     user: process.env.DB_USER,\n//     password: process.env.DB_PASSWORD,\n//     database: process.env.DB_NAME,\n// });\n// export default connection;\n\nconst connection = mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default().createPool({\n    host: process.env.DB_HOST,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD,\n    database: process.env.DB_NAME\n});\n// Test the connection\nasync function testConnection() {\n    try {\n        await connection.getConnection();\n        console.log(\"Connected to the database\");\n    } catch (error) {\n        console.error(\"Failed to connect to the database ==>\", error);\n    }\n}\n// Call the function to test the connection\ntestConnection();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHNDQUFzQztBQUV0Qyx3Q0FBd0M7QUFDeEMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyx5Q0FBeUM7QUFDekMscUNBQXFDO0FBQ3JDLE1BQU07QUFFTiw2QkFBNkI7QUFFTTtBQUVuQyxNQUFNQyxhQUFhRCxnRUFBZ0IsQ0FBQztJQUNoQ0csTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxPQUFPO0lBQ3pCQyxNQUFNSCxRQUFRQyxHQUFHLENBQUNHLE9BQU87SUFDekJDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssV0FBVztJQUNqQ0MsVUFBVVAsUUFBUUMsR0FBRyxDQUFDTyxPQUFPO0FBQ2pDO0FBRUEsc0JBQXNCO0FBQ3RCLGVBQWVDO0lBQ1gsSUFBSTtRQUNBLE1BQU1aLFdBQVdhLGFBQWE7UUFDOUJDLFFBQVFDLEdBQUcsQ0FBQztJQUNoQixFQUFFLE9BQU9DLE9BQU87UUFDWkYsUUFBUUUsS0FBSyxDQUFDLHlDQUF5Q0E7SUFDM0Q7QUFDSjtBQUVBLDJDQUEyQztBQUMzQ0o7QUFFQSxpRUFBZVosVUFBVUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZ2ljYXJkMDIvLi9zcmMvbGliL2RiLmpzPzdmOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IG15c3FsIGZyb20gJ215c3FsMi9wcm9taXNlJztcclxuXHJcbi8vIGNvbnN0IGNvbm5lY3Rpb24gPSBteXNxbC5jcmVhdGVQb29sKHtcclxuLy8gICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QsXHJcbi8vICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxyXG4vLyAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JELFxyXG4vLyAgICAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUsXHJcbi8vIH0pO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgY29ubmVjdGlvbjtcclxuXHJcbmltcG9ydCBteXNxbCBmcm9tICdteXNxbDIvcHJvbWlzZSc7XHJcblxyXG5jb25zdCBjb25uZWN0aW9uID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxyXG4gICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUixcclxuICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcclxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLFxyXG59KTtcclxuXHJcbi8vIFRlc3QgdGhlIGNvbm5lY3Rpb25cclxuYXN5bmMgZnVuY3Rpb24gdGVzdENvbm5lY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvbigpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZVwiKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZSA9PT5cIiwgZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDYWxsIHRoZSBmdW5jdGlvbiB0byB0ZXN0IHRoZSBjb25uZWN0aW9uXHJcbnRlc3RDb25uZWN0aW9uKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0aW9uO1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJjb25uZWN0aW9uIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsInRlc3RDb25uZWN0aW9uIiwiZ2V0Q29ubmVjdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/update-user.js":
/*!**************************************!*\
  !*** ./src/pages/api/update-user.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/db */ \"(api)/./src/lib/db.js\");\n/* harmony import */ var _multer_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../multer-config */ \"(api)/./multer-config.js\");\n/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! qrcode */ \"qrcode\");\n/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(qrcode__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! canvas */ \"canvas\");\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(canvas__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nfunction handler(req, res) {\n    _multer_config__WEBPACK_IMPORTED_MODULE_1__[\"default\"].fields([\n        {\n            name: \"profilePicture\",\n            maxCount: 1\n        },\n        {\n            name: \"backgroundPhoto\",\n            maxCount: 1\n        }\n    ])(req, {}, async (err)=>{\n        if (err) {\n            return res.status(500).send(err);\n        }\n        const { id, name, userName, address, email, mobile, whatsapp, facebook, instagram, twitter, designation, companyName, website, linkedin } = req.body;\n        // Initialize variables to avoid null reference\n        let profilePicture = null;\n        let backgroundPhoto = null;\n        // Check if files exist before accessing them\n        if (req.files[\"profilePicture\"] && req.files[\"profilePicture\"][0]) {\n            profilePicture = req.files[\"profilePicture\"][0].filename;\n        } else {\n            console.warn(\"No profile picture uploaded.\");\n        }\n        if (req.files[\"backgroundPhoto\"] && req.files[\"backgroundPhoto\"][0]) {\n            backgroundPhoto = req.files[\"backgroundPhoto\"][0].filename;\n        } else {\n            console.warn(\"No background photo uploaded.\");\n        }\n        // Create the profile URL\n        const profileUrl = `${process.env.BASE_URL}/${name}`;\n        // Generate QR Code path and final image path\n        const qrCodePath = `uploads/${Date.now()}-${name}-qr.png`;\n        const qrCodeFullPath = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"public\", qrCodePath);\n        // Check if ID is provided\n        if (!id) {\n            console.error(\"User ID is required\");\n            return res.status(400).json({\n                message: \"User ID is required.\"\n            });\n        }\n        // Prepare the update fields dynamically\n        const updates = [];\n        const values = [];\n        // Add fields to update if they are provided\n        if (name) {\n            updates.push(\"name = ?\");\n            values.push(name);\n        }\n        if (userName) {\n            updates.push(\"userName = ?\");\n            values.push(userName);\n        }\n        if (address) {\n            updates.push(\"address = ?\");\n            values.push(address);\n        }\n        if (email) {\n            updates.push(\"email = ?\");\n            values.push(email);\n        }\n        if (mobile) {\n            updates.push(\"mobile = ?\");\n            values.push(mobile);\n        }\n        if (whatsapp) {\n            updates.push(\"whatsapp = ?\");\n            values.push(whatsapp);\n        }\n        if (facebook) {\n            updates.push(\"facebook = ?\");\n            values.push(facebook);\n        }\n        if (instagram) {\n            updates.push(\"instagram = ?\");\n            values.push(instagram);\n        }\n        if (twitter) {\n            updates.push(\"twitter = ?\");\n            values.push(twitter);\n        }\n        if (designation) {\n            updates.push(\"designation = ?\");\n            values.push(designation);\n        }\n        if (companyName) {\n            updates.push(\"companyName = ?\");\n            values.push(companyName);\n        }\n        if (website) {\n            updates.push(\"website = ?\");\n            values.push(website);\n        }\n        if (profilePicture) {\n            updates.push(\"profilePicture = ?\");\n            values.push(profilePicture);\n        }\n        if (backgroundPhoto) {\n            updates.push(\"backgroundPhoto = ?\");\n            values.push(backgroundPhoto);\n        }\n        if (linkedin) {\n            updates.push(\"linkedin = ?\");\n            values.push(linkedin);\n        }\n        // Check if there are no fields to update\n        if (updates.length === 0) {\n            console.warn(\"No fields to update.\");\n            return res.status(400).json({\n                message: \"No fields to update.\"\n            });\n        }\n        // Add the user ID to the end of the values array\n        values.push(id);\n        try {\n            // Generate the QR code\n            const qrCodeBuffer = await qrcode__WEBPACK_IMPORTED_MODULE_2___default().toBuffer(profileUrl);\n            // Create canvas for combining QR code, profile photo, and name\n            const canvas = (0,canvas__WEBPACK_IMPORTED_MODULE_5__.createCanvas)(400, 600); // Adjust the canvas size as needed\n            const ctx = canvas.getContext(\"2d\");\n            // Load the profile picture and draw on the canvas if it exists\n            if (profilePicture) {\n                const profileImgPath = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"public/uploads\", profilePicture);\n                const profileImg = await (0,canvas__WEBPACK_IMPORTED_MODULE_5__.loadImage)(profileImgPath);\n                ctx.drawImage(profileImg, 100, 20, 200, 200); // Draw profile picture (x, y, width, height)\n            }\n            // Add user name below profile picture\n            ctx.font = \"bold 24px Arial\";\n            ctx.fillStyle = \"black\";\n            ctx.textAlign = \"center\";\n            ctx.fillText(name, 200, 250); // Text position (centered)\n            // Draw the QR code on the canvas below the name\n            const qrImg = await (0,canvas__WEBPACK_IMPORTED_MODULE_5__.loadImage)(qrCodeBuffer);\n            ctx.drawImage(qrImg, 100, 280, 200, 200); // Draw QR code (x, y, width, height)\n            // Save the final image (QR code + profile picture + name)\n            const finalImagePath = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"public\", qrCodePath);\n            const out = fs__WEBPACK_IMPORTED_MODULE_3___default().createWriteStream(finalImagePath);\n            const stream = canvas.createPNGStream();\n            stream.pipe(out);\n            out.on(\"finish\", async ()=>{\n                // Insert user data into the database, including the generated QR code path\n                await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`UPDATE users SET ${updates.join(\", \")} WHERE id = ?`, values);\n                res.status(200).json({\n                    message: \"Profile saved and QR code generated!\"\n                });\n            });\n        } catch (error) {\n            console.error(\"Error generating QR code or saving profile:\", error);\n            res.status(500).json({\n                error: \"Error generating QR code or saving profile\"\n            });\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLE9BQU9GLE9BQU87WUFDWlosUUFBUVksS0FBSyxDQUFDLCtDQUErQ0E7WUFDN0RyQyxJQUFJSyxNQUFNLENBQUMsS0FBS2lDLElBQUksQ0FBQztnQkFBRUQsT0FBTztZQUE2QztRQUMvRTtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpY2FyZDAyLy4vc3JjL3BhZ2VzL2FwaS91cGRhdGUtdXNlci5qcz82ZWEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25uZWN0aW9uIGZyb20gJy4uLy4uL2xpYi9kYic7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSAnLi4vLi4vLi4vbXVsdGVyLWNvbmZpZyc7XHJcbmltcG9ydCBRUkNvZGUgZnJvbSAncXJjb2RlJztcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCB7IGNyZWF0ZUNhbnZhcywgbG9hZEltYWdlIH0gZnJvbSAnY2FudmFzJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgICBhcGk6IHtcclxuICAgICAgICBib2R5UGFyc2VyOiBmYWxzZSxcclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgICBtdWx0ZXIuZmllbGRzKFtcclxuICAgICAgICB7IG5hbWU6ICdwcm9maWxlUGljdHVyZScsIG1heENvdW50OiAxIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnYmFja2dyb3VuZFBob3RvJywgbWF4Q291bnQ6IDEgfSxcclxuICAgIF0pKHJlcSwge30sIGFzeW5jIChlcnIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICBpZCwgLy8gRW5zdXJlIHRoaXMgaXMgaW5jbHVkZWRcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgdXNlck5hbWUsXHJcbiAgICAgICAgICAgIGFkZHJlc3MsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBtb2JpbGUsXHJcbiAgICAgICAgICAgIHdoYXRzYXBwLFxyXG4gICAgICAgICAgICBmYWNlYm9vayxcclxuICAgICAgICAgICAgaW5zdGFncmFtLFxyXG4gICAgICAgICAgICB0d2l0dGVyLFxyXG4gICAgICAgICAgICBkZXNpZ25hdGlvbixcclxuICAgICAgICAgICAgY29tcGFueU5hbWUsXHJcbiAgICAgICAgICAgIHdlYnNpdGUsXHJcbiAgICAgICAgICAgIGxpbmtlZGluLFxyXG4gICAgICAgIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB2YXJpYWJsZXMgdG8gYXZvaWQgbnVsbCByZWZlcmVuY2VcclxuICAgICAgICBsZXQgcHJvZmlsZVBpY3R1cmUgPSBudWxsO1xyXG4gICAgICAgIGxldCBiYWNrZ3JvdW5kUGhvdG8gPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBmaWxlcyBleGlzdCBiZWZvcmUgYWNjZXNzaW5nIHRoZW1cclxuICAgICAgICBpZiAocmVxLmZpbGVzWydwcm9maWxlUGljdHVyZSddICYmIHJlcS5maWxlc1sncHJvZmlsZVBpY3R1cmUnXVswXSkge1xyXG4gICAgICAgICAgICBwcm9maWxlUGljdHVyZSA9IHJlcS5maWxlc1sncHJvZmlsZVBpY3R1cmUnXVswXS5maWxlbmFtZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyBwcm9maWxlIHBpY3R1cmUgdXBsb2FkZWQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlcS5maWxlc1snYmFja2dyb3VuZFBob3RvJ10gJiYgcmVxLmZpbGVzWydiYWNrZ3JvdW5kUGhvdG8nXVswXSkge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kUGhvdG8gPSByZXEuZmlsZXNbJ2JhY2tncm91bmRQaG90byddWzBdLmZpbGVuYW1lO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk5vIGJhY2tncm91bmQgcGhvdG8gdXBsb2FkZWQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBwcm9maWxlIFVSTFxyXG4gICAgICAgIGNvbnN0IHByb2ZpbGVVcmwgPSBgJHtwcm9jZXNzLmVudi5CQVNFX1VSTH0vJHtuYW1lfWA7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIFFSIENvZGUgcGF0aCBhbmQgZmluYWwgaW1hZ2UgcGF0aFxyXG4gICAgICAgIGNvbnN0IHFyQ29kZVBhdGggPSBgdXBsb2Fkcy8ke0RhdGUubm93KCl9LSR7bmFtZX0tcXIucG5nYDtcclxuICAgICAgICBjb25zdCBxckNvZGVGdWxsUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgcXJDb2RlUGF0aCk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIElEIGlzIHByb3ZpZGVkXHJcbiAgICAgICAgaWYgKCFpZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVXNlciBJRCBpcyByZXF1aXJlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgdGhlIHVwZGF0ZSBmaWVsZHMgZHluYW1pY2FsbHlcclxuICAgICAgICBjb25zdCB1cGRhdGVzID0gW107XHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0gW107XHJcblxyXG4gICAgICAgIC8vIEFkZCBmaWVsZHMgdG8gdXBkYXRlIGlmIHRoZXkgYXJlIHByb3ZpZGVkXHJcbiAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKCduYW1lID0gPycpO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgndXNlck5hbWUgPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHVzZXJOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFkZHJlc3MpIHtcclxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKCdhZGRyZXNzID0gPycpO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChhZGRyZXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVtYWlsKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgnZW1haWwgPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGVtYWlsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1vYmlsZSkge1xyXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goJ21vYmlsZSA9ID8nKTtcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2gobW9iaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdoYXRzYXBwKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgnd2hhdHNhcHAgPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHdoYXRzYXBwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZhY2Vib29rKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgnZmFjZWJvb2sgPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGZhY2Vib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluc3RhZ3JhbSkge1xyXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goJ2luc3RhZ3JhbSA9ID8nKTtcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2goaW5zdGFncmFtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR3aXR0ZXIpIHtcclxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKCd0d2l0dGVyID0gPycpO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh0d2l0dGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlc2lnbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgnZGVzaWduYXRpb24gPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGRlc2lnbmF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbXBhbnlOYW1lKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgnY29tcGFueU5hbWUgPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGNvbXBhbnlOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdlYnNpdGUpIHtcclxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKCd3ZWJzaXRlID0gPycpO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh3ZWJzaXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByb2ZpbGVQaWN0dXJlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCgncHJvZmlsZVBpY3R1cmUgPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHByb2ZpbGVQaWN0dXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJhY2tncm91bmRQaG90bykgeyAvLyBDaGVjayBmb3IgYmFja2dyb3VuZCBwaG90byBleGlzdGVuY2VcclxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKCdiYWNrZ3JvdW5kUGhvdG8gPSA/Jyk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGJhY2tncm91bmRQaG90byk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaW5rZWRpbikge1xyXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goJ2xpbmtlZGluID0gPycpO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChsaW5rZWRpbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgbm8gZmllbGRzIHRvIHVwZGF0ZVxyXG4gICAgICAgIGlmICh1cGRhdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyBmaWVsZHMgdG8gdXBkYXRlLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGZpZWxkcyB0byB1cGRhdGUuJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCB0aGUgdXNlciBJRCB0byB0aGUgZW5kIG9mIHRoZSB2YWx1ZXMgYXJyYXlcclxuICAgICAgICB2YWx1ZXMucHVzaChpZCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHRoZSBRUiBjb2RlXHJcbiAgICAgICAgICAgIGNvbnN0IHFyQ29kZUJ1ZmZlciA9IGF3YWl0IFFSQ29kZS50b0J1ZmZlcihwcm9maWxlVXJsKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGNvbWJpbmluZyBRUiBjb2RlLCBwcm9maWxlIHBob3RvLCBhbmQgbmFtZVxyXG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXMoNDAwLCA2MDApOyAvLyBBZGp1c3QgdGhlIGNhbnZhcyBzaXplIGFzIG5lZWRlZFxyXG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgdGhlIHByb2ZpbGUgcGljdHVyZSBhbmQgZHJhdyBvbiB0aGUgY2FudmFzIGlmIGl0IGV4aXN0c1xyXG4gICAgICAgICAgICBpZiAocHJvZmlsZVBpY3R1cmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVJbWdQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMvdXBsb2FkcycsIHByb2ZpbGVQaWN0dXJlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVJbWcgPSBhd2FpdCBsb2FkSW1hZ2UocHJvZmlsZUltZ1BhdGgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShwcm9maWxlSW1nLCAxMDAsIDIwLCAyMDAsIDIwMCk7IC8vIERyYXcgcHJvZmlsZSBwaWN0dXJlICh4LCB5LCB3aWR0aCwgaGVpZ2h0KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdXNlciBuYW1lIGJlbG93IHByb2ZpbGUgcGljdHVyZVxyXG4gICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDI0cHggQXJpYWwnO1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQobmFtZSwgMjAwLCAyNTApOyAvLyBUZXh0IHBvc2l0aW9uIChjZW50ZXJlZClcclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgdGhlIFFSIGNvZGUgb24gdGhlIGNhbnZhcyBiZWxvdyB0aGUgbmFtZVxyXG4gICAgICAgICAgICBjb25zdCBxckltZyA9IGF3YWl0IGxvYWRJbWFnZShxckNvZGVCdWZmZXIpO1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHFySW1nLCAxMDAsIDI4MCwgMjAwLCAyMDApOyAvLyBEcmF3IFFSIGNvZGUgKHgsIHksIHdpZHRoLCBoZWlnaHQpXHJcblxyXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBmaW5hbCBpbWFnZSAoUVIgY29kZSArIHByb2ZpbGUgcGljdHVyZSArIG5hbWUpXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsSW1hZ2VQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCBxckNvZGVQYXRoKTtcclxuICAgICAgICAgICAgY29uc3Qgb3V0ID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZmluYWxJbWFnZVBhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBjYW52YXMuY3JlYXRlUE5HU3RyZWFtKCk7XHJcbiAgICAgICAgICAgIHN0cmVhbS5waXBlKG91dCk7XHJcblxyXG4gICAgICAgICAgICBvdXQub24oJ2ZpbmlzaCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB1c2VyIGRhdGEgaW50byB0aGUgZGF0YWJhc2UsIGluY2x1ZGluZyB0aGUgZ2VuZXJhdGVkIFFSIGNvZGUgcGF0aFxyXG4gICAgICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcclxuICAgICAgICAgICAgICAgICAgICBgVVBEQVRFIHVzZXJzIFNFVCAke3VwZGF0ZXMuam9pbignLCAnKX0gV0hFUkUgaWQgPSA/YCxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9maWxlIHNhdmVkIGFuZCBRUiBjb2RlIGdlbmVyYXRlZCEnIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VuZXJhdGluZyBRUiBjb2RlIG9yIHNhdmluZyBwcm9maWxlOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJvciBnZW5lcmF0aW5nIFFSIGNvZGUgb3Igc2F2aW5nIHByb2ZpbGUnIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25uZWN0aW9uIiwibXVsdGVyIiwiUVJDb2RlIiwiZnMiLCJwYXRoIiwiY3JlYXRlQ2FudmFzIiwibG9hZEltYWdlIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwiaWQiLCJ1c2VyTmFtZSIsImFkZHJlc3MiLCJlbWFpbCIsIm1vYmlsZSIsIndoYXRzYXBwIiwiZmFjZWJvb2siLCJpbnN0YWdyYW0iLCJ0d2l0dGVyIiwiZGVzaWduYXRpb24iLCJjb21wYW55TmFtZSIsIndlYnNpdGUiLCJsaW5rZWRpbiIsImJvZHkiLCJwcm9maWxlUGljdHVyZSIsImJhY2tncm91bmRQaG90byIsImZpbGVzIiwiZmlsZW5hbWUiLCJjb25zb2xlIiwid2FybiIsInByb2ZpbGVVcmwiLCJwcm9jZXNzIiwiZW52IiwiQkFTRV9VUkwiLCJxckNvZGVQYXRoIiwiRGF0ZSIsIm5vdyIsInFyQ29kZUZ1bGxQYXRoIiwiam9pbiIsImN3ZCIsImVycm9yIiwianNvbiIsIm1lc3NhZ2UiLCJ1cGRhdGVzIiwidmFsdWVzIiwicHVzaCIsImxlbmd0aCIsInFyQ29kZUJ1ZmZlciIsInRvQnVmZmVyIiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsInByb2ZpbGVJbWdQYXRoIiwicHJvZmlsZUltZyIsImRyYXdJbWFnZSIsImZvbnQiLCJmaWxsU3R5bGUiLCJ0ZXh0QWxpZ24iLCJmaWxsVGV4dCIsInFySW1nIiwiZmluYWxJbWFnZVBhdGgiLCJvdXQiLCJjcmVhdGVXcml0ZVN0cmVhbSIsInN0cmVhbSIsImNyZWF0ZVBOR1N0cmVhbSIsInBpcGUiLCJvbiIsInF1ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/update-user.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupdate-user&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupdate-user.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();